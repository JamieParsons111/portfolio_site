<!DOCTYPE html>
<html lang="en">
<head>
  <title>JP's Snake game</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  <style>
  </style>
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="Image of Logo"></div>
    <img src = "images/jp_logo.png"  class="align-self-start mr-3" style="width:60px">
    <a class="navbar-brand" href="home.html">Jamie's Portfolio Website</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="home.html">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled" href="#">CV</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"  aria-haspopup="true" aria-expanded="false">
            Projects
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="#">All Projects</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="game.html">Snake Game</a>
            <a class="dropdown-item" href="#">Another action</a>
       
          </div>
        <li class="nav-item">
            <a class="nav-link" href="javascript:void(0)">Account</a>
        </li>
     
      </ul>
      <form class="form-inline my-2 my-lg-0">
        <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-light my-2 my-sm-0" type="submit">Search</button>
      </form>
    </div>
  </nav>

  
<div class="container-fluid mt-3">
  <h3>JP's Snake Game</h3>
  <p> Press use the arrow keys to move the snake and eat food!</p>
  <div id="gameContainer"></div>
  <!-- <h3> Score: </h3> -->





<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
canvas {
    border:5px solid #000000;
    background-color: #ffffff;
}
</style>
</head>
<body onload="startGame()">
<script>

var myGamePiece;

// Spawns the objects and canvas
function startGame() {
    myGameArea.start();
    snake = new component(30, 30, "red", 250, 150);
    food =  new component (30, 30, "blue", 50, 90);
    // snake.speedX = 0;
    // snake.speedY = 0;
}

// Creates the canvas 
var myGameArea = {
    canvas : document.createElement("canvas"),
    start : function() {
        this.canvas.width = 600;
        this.canvas.height = 400;
        this.context = this.canvas.getContext("2d");
        document.getElementById("gameContainer").appendChild(this.canvas); // Append to the game container
        this.interval = setInterval(updateGameArea, 10);
        window.addEventListener('keydown', function (e) {
      myGameArea.key = e.keyCode;
      })
      window.addEventListener('keyup', function (e) {
        myGameArea.key = true;
      })
    },
    clear : function() {
    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
  }
}


// Creates a constructor that allows you to easily make the game pieces. 
function component(width, height, color, x, y) {
    this.width = width;
    this.height = height;
    this.speedX = 0;
    this.speedY = 0;
    this.x = x;
    this.y = y;    

    this.update = function(){
    ctx = myGameArea.context;
    ctx.fillStyle = color;
    ctx.fillRect(this.x, this.y, this.width, this.height);
    }

    this.newPos = function() {
    this.x += this.speedX;
    this.y += this.speedY;
  }
  this.reset = function() {
        // Reset position and speed when the game is reset
        this.x = x;
        this.y = y;
        this.speedX = 0; // Reset to 0 on game restart
        this.speedY = 0; // Reset to 0 on game restart
    }

}


function boundaryCheck()
{
  // These boundry values may need to be changed if the canvas size is altered. 
  if (snake.x < 0) {
    snake.x = 0; // Stop it at the left edge
    console.log("Snake hit the wall! Game over.");
    snake.reset();

  }

  // Top border check
  if (snake.y < 0) {
    snake.y = 0; // Stop it at the top edge
    console.log("Snake hit the wall! Game over.");
    snake.reset();

  }

  // Right border check
  if (snake.x > 570) {
      snake.x = 570; // Stop it at the right edge
      console.log("Snake hit the wall! Game over.");
      snake.reset();

  }

  // Bottom border check
  if (snake.y > 370) {
      snake.y = 370; // Stop it at the right edge
      console.log("Snake hit the wall! Game over.");
      snake.reset();
  }
};

function updateGameArea() {
  myGameArea.clear();

  if (myGameArea.key && myGameArea.key == 37) {snake.speedX = -1; snake.speedY = 0; }
  if (myGameArea.key && myGameArea.key == 39) {snake.speedX = 1; snake.speedY = 0;}
  if (myGameArea.key && myGameArea.key == 38) {snake.speedY = -1; snake.speedX = 0; }
  if (myGameArea.key && myGameArea.key == 40) {snake.speedY = 1; snake.speedX = 0;  }

  snake.update();
  snake.newPos();
  food.newPos();
  food.update();

//  // Boundary check
//  if (snake.x < 0 || snake.x >= myGameArea.width || snake.y < 0 || snake.y >= myGameArea.height) {
//     console.log("Snake hit the wall! Game over.");
//     startGame();
//     return; // Stop the game loop or handle game over
//   }

  boundaryCheck();

  

}

</script>    



</body>
</html>
